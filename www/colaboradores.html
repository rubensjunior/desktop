<!-- Wappler include head-page="backoffice.html" is="dmx-app" id="colaboradores" appconnect="local" bootstrap5="local" capacitor="local" jquery_35="local" fontawesome_5="local" components="{dmxBootstrap5Modal:{},dmxNotifications:{},dmxBootstrap5Offcanvas:{}}" -->


<dmx-serverconnect id="apiListarColaboradores" url="http://localhost:8100/api/desktop/colaboradores/listar-colaboradores" site="sfapis" dmx-param:empresa="usuarioLogado.data.queryUsuario.empresa"></dmx-serverconnect>
<div class="modal" id="criarModalColaborador" is="dmx-bs5-modal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Criar colaborador</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <form id="criarFormColaborador" is="dmx-serverconnect-form" method="post" action="http://localhost:8100/api/desktop/colaboradores/cadastrar-colaborador" site="sfapis" dmx-on:success="criarFormColaborador.reset();criarModalColaborador.hide();apiListarColaboradores.load({empresa: usuarioLogado.data.queryUsuario.empresa});alertas.success('Cadastro realizado com sucesso!')" dmx-on:error="criarModalColaborador.hide();alertas.danger('Ocorreu um erro: '+lastError.status+lastError.message+lastError.response);academicocheck.setValue(0);admincheck.setValue(0);atendimentocheck.setValue(0);comercialcheck.setValue(0);diretoriacheck.setValue(0);financeirocheck.setValue(0);mktcheck.setValue(0);admcheck.setValue(0);ticheck.setValue(0);criadopor.setValue(0);empresa.setValue(0)">
                    <div class="form-group mb-3">
                        <input type="hidden" class="form-control" id="empresa" name="empresa" aria-describedby="input1_help" placeholder="Enter some text" dmx-bind:value="usuarioLogado.data.queryUsuario.empresa">
                    </div>
                    <div class="form-group mb-3">
                        <input type="hidden" class="form-control" id="criadopor" name="criadopor" aria-describedby="input1_help" placeholder="Enter some text" dmx-bind:value="identificacao.data.usuario">
                    </div>
                    <div class="form-group mb-3">
                        <input type="text" class="form-control" id="nomecolaborador" name="nomecolaborador" aria-describedby="input1_help" placeholder="Nome do colaborador">
                    </div>
                    <div class="form-group mb-3">
                        <input type="email" class="form-control" id="emailcolaborador" name="emailcolaborador" aria-describedby="input1_help" placeholder="E-mail para login">
                    </div>
                    <div class="row mb-3 m-0 p-3 border rounded rounded-3 border-light-subtle">
                        <div class="col-4">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" value="false" id="academicocheck" name="academicocheck" dmx-on:checked="academicocheck.setValue(true)" dmx-on:unchecked="academicocheck.setValue(false)">
                                <label class="form-check-label" for="academicocheck">Acadêmico</label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" value="false" id="admincheck" name="admincheck" dmx-on:checked="admincheck.setValue(true)" dmx-on:unchecked="admincheck.setValue(false)">
                                <label class="form-check-label" for="admincheck">Administrativo</label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" value="false" id="atendimentocheck" name="atendimentocheck" dmx-on:checked="atendimentocheck.setValue(true)" dmx-on:unchecked="atendimentocheck.setValue(false)">
                                <label class="form-check-label" for="atendimentocheck">Atendimento</label>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" value="false" id="comercialcheck" name="comercialcheck" dmx-on:checked="comercialcheck.setValue(true)" dmx-on:unchecked="comercialcheck.setValue(false)">
                                <label class="form-check-label" for="comercialcheck">Comercial</label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" value="false" id="diretoriacheck" name="diretoriacheck" dmx-on:checked="diretoriacheck.setValue(true)" dmx-on:unchecked="diretoriacheck.setValue(false)">
                                <label class="form-check-label" for="comercialcheck">Diretoria</label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" value="false" id="financeirocheck" name="financeirocheck" dmx-on:checked="financeirocheck.setValue(true)" dmx-on:unchecked="financeirocheck.setValue(false)">
                                <label class="form-check-label" for="comercialcheck">Financeiro</label>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" value="false" id="mktcheck" name="mktcheck" dmx-on:checked="mktcheck.setValue(true)" dmx-on:unchecked="mktcheck.setValue(false)">
                                <label class="form-check-label" for="mktcheck">Marketing</label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" value="false" id="ticheck" name="ticheck" dmx-on:checked="ticheck.setValue(true)" dmx-on:unchecked="ticheck.setValue(false)">
                                <label class="form-check-label" for="mktcheck">T.I</label>
                            </div>
                        </div>
                    </div>
                    <div class="row m-0 p-3 border rounded rounded-3 border-light-subtle">
                        <div class="col-4">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" value="false" id="admcheck" name="admcheck" dmx-on:checked="admcheck.setValue(true)" dmx-on:unchecked="admcheck.setValue(false)">
                                <label class="form-check-label" for="admcheck">Administrador</label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" dmx-on:click="criarFormColaborador.submit()">Cadastrar</button>
            </div>
        </div>
    </div>
</div>
<main>
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div class="d-flex">
            <h4 class=" m-0">Colaboradores<small class="text-body-secondary sub-title">Gestão de contas e acessos</small>
            </h4>
        </div><button id="btn7" class="btn btn-dark py-2" data-bs-toggle="modal" data-bs-target="#criarModalColaborador">Criar novo</button>
    </div>
    <div class="container-fluid bg-white p-4 rounded-3 new-shadow">
        <div class="row">
            <div class="col">

                <div class="row pb-3 gx-2 align-items-center border-bottom mx-0">
                    <div class="col-4 align-self-center p-0">
                        <h6 class="p-1 m-0 txt-tab-title">Nome</h6>
                    </div>
                    <div class="col align-self-center p-0">
                        <h6 class="p-1 m-0 txt-tab-title">E-mail</h6>
                    </div>
                    <div class="col align-self-center p-0">
                        <h6 class="p-1 m-0 txt-tab-title text-center">Ativo</h6>
                    </div>
                    <div class="col align-self-center p-0">
                        <h6 class="p-1 m-0 txt-tab-title text-end">Ações</h6>
                    </div>
                </div>
                <div class="row" key="id">
                    <div class="col" is="dmx-repeat" id="listaColaboradores" dmx-bind:repeat="apiListarColaboradores.data.queryListarColaboradores" key="id">
                        <div class="row gx-2 py-3 align-items-center border-bottom mx-0">
                            <div class="col-4 align-self-center p-0">
                                <p class="p-1 m-0 txt-tab">{{nome}}</p>
                            </div>
                            <div class="col align-self-center p-0">
                                <p class="p-1 m-0 txt-tab">{{email}}</p>
                            </div>
                            <div class="col align-self-center p-0 text-center">
                                <input class="form-check-input" type="checkbox" value="" id="input2" name="input2" dmx-bind:checked="isAtivo==1" readonly="true" disabled="true">
                            </div>
                            <div class="col align-self-center p-0">
                                <div class="d-flex justify-content-end">
                                    <div class="dropdown">
                                        <button id="editar" class="btn dropdown-toggle btn-sm btn-light txt-tab-button" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Ações</button>
                                        <div class="dropdown-menu" aria-labelledby="dropdown1">
                                            <button id="btn2" class="btn w-100 text-start" dmx-on:click="editarColagorador.select(id);editarModal.show()" data-bs-target="#editarModal" type="submit">Editar</button>
                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>



                </div>


            </div>
        </div>
    </div>
</main>